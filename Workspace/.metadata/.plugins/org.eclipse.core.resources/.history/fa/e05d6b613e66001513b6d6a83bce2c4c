package MyPackage;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;

import socs.network.node.Router;

public class ExternalRouterConnection extends Thread
{
	private Socket socket = null;
	private ObjectOutputStream socketOutput;
	private ObjectInputStream socketInput;
	
	private final Router router;
	
	public ExternalRouterConnection(Router r, Socket socket) throws IOException
	{
		this.socket = socket;
		router = r;
		
		socketOutput = new ObjectOutputStream(this.socket.getOutputStream());
		socketOutput.flush(); //sometimes there are leftover data
	    
		socketInput = new ObjectInputStream(this.socket.getInputStream());
		
		try
		{
			router.AddNeighbor(this);
		
			System.out.print("A connection has been made");
		}
		catch(NoAvailableSlotsForConnectionException exception)
		{
			System.out.print("There are no available slots for connection.");
		}
	}
}
